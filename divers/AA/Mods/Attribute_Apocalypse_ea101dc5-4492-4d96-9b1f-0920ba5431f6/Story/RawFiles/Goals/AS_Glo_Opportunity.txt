Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
StoryEvent((CHARACTERGUID)_Char,"AS_ResetAttributes")
THEN
RemoveStatus(_Char,"AS_GUARANTEECRIT");

/*
IF
ObjectTurnEnded(_Char)
AND
ObjectGetFlag(_Char,"AS_HasBlade",1)
THEN
ApplyStatus(_Char,"AS_GUARANTEECRIT",-1.0,1);

IF
ObjectEnteredCombat(_Char,_)
THEN
SetStoryEvent(_Char,"AS_SCR_CHECKWPN");

IF
ItemEquipped(_,_Char)
THEN
SetStoryEvent(_Char,"AS_SCR_CHECKWPN");

IF
ObjectEnteredCombat(_Char,_)
AND
ObjectGetFlag(_Char,"AS_HasBlade",1)
THEN
ApplyStatus(_Char,"AS_GUARANTEECRIT",-1.0,1);

IF
ObjectTurnStarted(_Char)
THEN
RemoveStatus(_Char,"AS_GUARANTEECRIT");

IF
StoryEvent(_Char,"AS_ResetAttributes")
THEN
SetStoryEvent(_Char,"AS_SCR_CHECKWPN");

IF
ObjectLeftCombat(_Char,_)
THEN
ProcObjectTimer(_Char,"AS_DefinitelyRemoveCrit",500);
RemoveStatus(_Char,"AS_GUARANTEECRIT");

PROC
ProcObjectTimerFinished(_Char,"AS_DefinitelyRemoveCrit")
AND
HasActiveStatus(_Char,"AS_GUARANTEECRIT",1)
THEN
RemoveStatus(_Char,"AS_GUARANTEECRIT");
*/
EXITSECTION

ENDEXITSECTION
